#!/bin/bash

# export RABBITMQ_MNESIA_BASE=/var/lib/rabbitmq/mnesia2
# Defaults to /var/lib/rabbitmq/mnesia. Set this to the directory where Mnesia
# database files should be placed.

# export RABBITMQ_LOG_BASE
# Defaults to /var/log/rabbitmq. Log files generated by the server will be placed
# in this directory.

export RABBITMQ_NODENAME=$1
# Defaults to rabbit. This can be useful if you want to run more than one node
# per machine - RABBITMQ_NODENAME should be unique per erlang-node-and-machine
# combination. See clustering on a single machine guide at <http://www.rab-
# bitmq.com/clustering.html#single-machine> for details.

# RABBITMQ_NODE_IP_ADDRESS
# Defaults to 0.0.0.0. This can be changed if you only want to bind to one net-
# work interface.

export RABBITMQ_NODE_PORT=$2
# Defaults to 5672.

export RABBITMQ_CONFIG_FILE=$3
# RABBITMQ_CLUSTER_CONFIG_FILE
# Defaults to /etc/rabbitmq/rabbitmq_cluster.config. If this file is present it
# is used by the server to auto-configure a RabbitMQ cluster.  See the clustering
# guide at <http://www.rabbitmq.com/clustering.html> for details.
export RABBITMQ_ENABLED_PLUGINS_FILE=$4

rabbitmq-server

rm -f $RABBITMQ_CONFIG_FILE
rm -f $RABBITMQ_ENABLED_PLUGINS_FILE
